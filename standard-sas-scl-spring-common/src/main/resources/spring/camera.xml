<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:aop="http://www.springframework.org/schema/aop" xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">


	<bean id="mapCameraAdaptor" class="com.sicpa.standard.client.common.ioc.GenericMapping" scope="prototype">
		<constructor-arg>
			<map>
				<entry key="standard" value-ref="stdCameraAdaptor" />
				<entry key="simulator" value-ref="cameraSimulatorAdaptor" />
			</map>
		</constructor-arg>
	</bean>

	<bean id="stdCameraModel" class="com.sicpa.standard.sasscl.utils.ConfigUtilEx" factory-method="load" scope="prototype">
		<constructor-arg value="config/camera/camera_####.xml" />
		<constructor-arg ref="deviceModelNamePostfixProperty" />
	</bean>

	<bean id="cameraSimulatorModel" class="com.sicpa.standard.sasscl.utils.ConfigUtilEx" factory-method="load" scope="prototype">
		<constructor-arg value="config/camera/simulator/cameraSimulator_####.xml" />
		<constructor-arg ref="deviceModelNamePostfixProperty" />
	</bean>

	<bean id="stdCameraController" class="${stdCameraController}" scope="prototype">
		<constructor-arg ref="stdCameraModel" />
	</bean>

	<bean id="cameraSimulatorController" class="${cameraSimulatorController}" scope="prototype">
		<constructor-arg ref="cameraSimulatorModel" />
		<property name="productionParameters" ref="productionParameters" />
		<property name="simulatorGui" ref="simulatorGui" />
		<property name="aliasROI_StartRow" value="nStartRow" />
		<property name="aliasROI_x" value="nDMXROIcol" />
		<property name="aliasROI_y" value="nDMXROIrow" />
		<property name="aliasROI_w" value="nDMXROIwide" />
		<property name="aliasROI_h" value="nDMXROIhigh" />
	</bean>

	<bean id="stdCameraAdaptor" class="${stdCameraAdaptor}" scope="prototype">
		<constructor-arg ref="stdCameraController" />
		<constructor-arg ref="cameraRoiImageTransformer" />
		<property name="productionParameters" ref="productionParameters" />
		<property name="cameraJobFilesConfig" ref="cameraJobFilesConfig" />
		<property name="cameraImageTransformers">
			<list>
				<ref bean="cropImageTransformer" />
				<ref bean="cameraImageRotator" />
			</list>
		</property>
	</bean>

	<bean id="cameraSimulatorAdaptor" class="${cameraSimulatorAdaptor}" scope="prototype">
		<constructor-arg ref="cameraSimulatorController" />
		<constructor-arg ref="cameraRoiImageTransformer" />
		<property name="productionParameters" ref="productionParameters" />
		<property name="cameraJobFilesConfig" ref="cameraJobFilesConfig" />
	</bean>

	<bean id="camera" factory-bean="mapCameraAdaptor" factory-method="get" scope="prototype">
		<constructor-arg value="${camera.behavior}" />
	</bean>

	<bean id="cameraImageRotator" class="${cameraImageRotator}" scope="prototype" />
	<bean id="cropImageTransformer" class="${cropImageTransformer}" scope="prototype" />

	<bean id="cameraRoiImageTransformer" class="${cameraRoiImageTransformer}" scope="prototype">
		<property name="aliasROI_StartRow" value="nStartRow" />
		<property name="aliasROI_x" value="nDMXROIcol" />
		<property name="aliasROI_y" value="nDMXROIrow" />
		<property name="aliasROI_w" value="nDMXROIwide" />
		<property name="aliasROI_h" value="nDMXROIhigh" />
	</bean>

</beans>