<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:aop="http://www.springframework.org/schema/aop" xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">

	<bean id="reportScreen" class="com.sicpa.standard.sasscl.view.report.ReportScreen" />

	<bean id="mainFrameController" class="com.sicpa.standard.sasscl.view.MainFrameController">
		<property name="productionParameters" ref="productionParameters" />
		<property name="lineId" value="${lineId}" />
		<property name="messageCodeMapper" ref="messagesMapping" />

		<property name="securedPanels">
			<list>
				<ref bean="plcMonitoringView" />
				<ref bean="advancedControlView" />
				<ref bean="plcVariablesPanel" />
				<ref bean="productionStatisticsPanel" />
				<ref bean="systemEventPanel" />
				<ref bean="MBeanViewer" />
				<ref bean="miscPanel" />
				<ref bean="beanCallPanel" />
				<ref bean="encodersInfoView" />
				<ref bean="reportScreen" />
			</list>
		</property>
	</bean>

	<bean id="mainFrame" class="com.sicpa.standard.sasscl.view.MainFrameGetter">
		<property name="viewController" ref="mainFrameController" />
		<property name="startStopView" ref="startStopView" />
		<property name="exitView" ref="exitView" />
		<property name="optionsView" ref="optionsView" />
		<property name="selectionChangeView" ref="selectionChangeView" />
		<property name="messagesView" ref="messagesView" />
		<property name="mainPanelGetter" ref="mainPanelGetter" />
		<property name="snapshotView" ref="snapshotView" />
	</bean>

	<bean id="MBeanViewer" class="com.sicpa.standard.sasscl.view.monitoring.mbean.BeanViewer">
		<property name="bean" ref="statsMBean" />
	</bean>

	<bean id="plcVariablesPanel" class="com.sicpa.standard.sasscl.view.config.plc.MultiEditablePlcVariablesSet" />

	<bean id="productionStatisticsPanel" class="com.sicpa.standard.sasscl.view.monitoring.ProductionStatisticsPanel" />
	<bean id="systemEventPanel" class="com.sicpa.standard.sasscl.view.monitoring.SystemEventPanel" />
	<bean id="miscPanel" class="com.sicpa.standard.sasscl.view.config.misc.MiscConfigPanelGetter" />

	<bean id="simulatorGui" class="com.sicpa.standard.sasscl.devices.simulator.gui.SimulatorControlView">
		<property name="visible" value="${displaySimulatorGui}" />
	</bean>

	<bean id="selectionModelFactory" class="com.sicpa.standard.sasscl.productionParameterSelection.DefaultSelectionModelFactory">
		<property name="productionModeOnlySelection" value="#{ '${skuSelection.behavior}'.toUpperCase() == 'OPERATOR_PARTIAL' }" />
	</bean>

	<bean id="beanCallPanel" class="com.sicpa.standard.sasscl.view.forceCall.BeanCallPanel" init-method="init">
		<property name="beancalls" ref="beanCallList" />
	</bean>

	<bean id="encodersInfoView" class="com.sicpa.standard.sasscl.view.encoder.EncodersInfoView">
		<property name="storage" ref="storage" />
	</bean>

	<util:list id="beanCallList">
		<bean class="com.sicpa.standard.sasscl.view.forceCall.BeanCall">
			<property name="bean" ref="remoteServerSheduledJobs" />
			<property name="methodName" value="getEncodersFromRemoteServer" />
			<property name="description" value="job.getEncoders" />
		</bean>
		<bean class="com.sicpa.standard.sasscl.view.forceCall.BeanCall">
			<property name="bean" ref="remoteServerSheduledJobs" />
			<property name="methodName" value="getAuthenticatorFromRemoteServer" />
			<property name="description" value="job.getAuthenticator" />
		</bean>
		<bean class="com.sicpa.standard.sasscl.view.forceCall.BeanCall">
			<property name="bean" ref="remoteServerSheduledJobs" />
			<property name="methodName" value="getProductionParametersFromRemoteServer" />
			<property name="description" value="job.getProductionParameters" />
		</bean>
		<bean class="com.sicpa.standard.sasscl.view.forceCall.BeanCall">
			<property name="bean" ref="remoteServerSheduledJobs" />
			<property name="methodName" value="getLanguageFileFromRemoteServer" />
			<property name="description" value="job.getLanguageFile" />
		</bean>

		<bean class="com.sicpa.standard.sasscl.view.forceCall.BeanCallGroup">
			<property name="description" value="job.package" />
			<property name="calls">
				<util:list>
					<bean class="com.sicpa.standard.sasscl.view.forceCall.BeanCall">
						<property name="bean" ref="production" />
						<property name="methodName" value="saveProductionData" />
					</bean>
					<bean class="com.sicpa.standard.sasscl.view.forceCall.BeanCall">
						<property name="bean" ref="production" />
						<property name="methodName" value="packageProduction" />
					</bean>
				</util:list>
			</property>
		</bean>

		<bean class="com.sicpa.standard.sasscl.view.forceCall.BeanCallGroup">
			<property name="description" value="job.packageAndSendProduction" />
			<property name="calls">
				<util:list>
					<bean class="com.sicpa.standard.sasscl.view.forceCall.BeanCall">
						<property name="bean" ref="production" />
						<property name="methodName" value="saveProductionData" />
					</bean>
					<bean class="com.sicpa.standard.sasscl.view.forceCall.BeanCall">
						<property name="bean" ref="production" />
						<property name="methodName" value="packageProduction" />
					</bean>
					<bean class="com.sicpa.standard.sasscl.view.forceCall.BeanCall">
						<property name="bean" ref="production" />
						<property name="methodName" value="sendAllProductionData" />
					</bean>
				</util:list>
			</property>
		</bean>

	</util:list>

	<bean id="screensFlow" class="com.sicpa.standard.sasscl.controller.view.flow.DefaultScreensFlow" init-method="buildScreensFlow">
		<property name="initialScreen" ref="mainPanelGetter" />
		<property name="selectionScreen" ref="selectProductionParametersViewController" />
		<property name="mainScreen" ref="mainPanelGetter" />
		<property name="exitScreen" ref="productionSendingViewController" />
	</bean>


	<!-- START STOP VIEW -->

	<bean id="startStopView" class="com.sicpa.standard.sasscl.view.startstop.StartStopView" init-method="initGUI">
		<property name="controller" ref="startStopViewController" />
		<property name="model" value="#{startStopViewController.model}" />
		<property name="productionStatusView" ref="productionStatusView" />

	</bean>
	<bean id="startStopViewController" class="com.sicpa.standard.sasscl.view.startstop.StartStopViewController">
		<property name="flowControl" ref="flowControl" />
	</bean>

	<!-- SELECTION CHANGE -->
	<bean id="selectionChangeView" class="com.sicpa.standard.sasscl.view.selection.change.SelectionChangeView">
		<property name="controller" ref="selectionChangeViewController" />
		<property name="model" value="#{selectionChangeViewController.model}" />
	</bean>
	<bean id="selectionChangeViewController" class="com.sicpa.standard.sasscl.view.selection.change.SelectionChangeViewController">
		<property name="flowControl" ref="flowControl" />
		<property name="skuListProvider" ref="skuListProvider" />
	</bean>

	<!-- EXIT / LOGOUT -->
	<bean id="exitView" class="com.sicpa.standard.sasscl.view.exit.DefaultExitView">
		<property name="controller" ref="exitViewController" />
		<property name="model" value="#{exitViewController.model}" />
	</bean>
	<bean id="exitViewController" class="com.sicpa.standard.sasscl.view.exit.ExitViewController">
		<property name="flowControl" ref="flowControl" />
		<property name="remoteServer" ref="remoteServer" />
	</bean>

	<!-- OPTIONS -->
	<bean id="optionsView" class="com.sicpa.standard.sasscl.view.option.DefaultOptionsView">
		<property name="controller" ref="optionsViewController" />
		<property name="model" value="#{optionsViewController.model}" />
	</bean>
	<bean id="optionsViewController" class="com.sicpa.standard.sasscl.view.option.OptionsViewController" />

	<!-- MESSAGES VIEW -->
	<bean id="messagesView" class="com.sicpa.standard.sasscl.view.messages.DefaultMessagesView" />
	<bean id="messagesViewController" class="com.sicpa.standard.sasscl.view.messages.MessagesViewController">
		<property name="view" ref="messagesView" />
		<property name="messageCodeMapper" ref="messagesMapping" />
	</bean>

	<!-- QUESTION VIEW -->
	<bean id="questionView" class="com.sicpa.standard.sasscl.view.question.DefaultQuestionView">
		<property name="controller" ref="questionViewController" />
		<property name="model" value="#{questionViewController.model}" />
	</bean>
	<bean id="questionViewController" class="com.sicpa.standard.sasscl.view.question.QuestionViewController" />

	<!-- SYSTEM INFO VIEW -->
	<bean id="systemInfoView" class="com.sicpa.standard.sasscl.view.main.systemInfo.SystemInfoView">
		<property name="controller" ref="systemInfoViewController" />
		<property name="model" value="#{systemInfoViewController.model}" />
	</bean>
	<bean id="systemInfoViewController" class="com.sicpa.standard.sasscl.view.main.systemInfo.SystemInfoViewController">
		<property name="remoteServer" ref="remoteServer" />
		<property name="plcProvider" ref="plcProvider" />
	</bean>

	<!-- STATISTICS VIEW -->
	<bean id="statisticsView" class="com.sicpa.standard.sasscl.view.main.statistics.StatisticsView">
		<property name="controller" ref="statisticsViewController" />
		<property name="model" value="#{statisticsViewController.model}" />
	</bean>
	<bean id="statisticsViewController" class="com.sicpa.standard.sasscl.view.main.statistics.StatisticsViewController">
		<property name="statistics" ref="statistics" />
		<property name="descriptorMapping" ref="statisticsKeyToViewDescriptorMapping" />
		<property name="allProperties" ref="allProperties" />
		<property name="lineSpeedVisible" value="${statistics.view.visible.speed}" />
		<property name="totalVisible" value="${statistics.view.visible.total}" />
	</bean>

	<!-- SELECTION DISPLAY -->
	<bean id="selectionDisplayView" class="com.sicpa.standard.sasscl.view.selection.display.SelectionDisplayView">
		<property name="controller" ref="selectionDisplayViewController" />
		<property name="model" value="#{selectionDisplayViewController.model}" />
	</bean>
	<bean id="selectionDisplayViewController" class="com.sicpa.standard.sasscl.view.selection.display.SelectionDisplayViewController">
		<property name="productionParameters" ref="productionParameters" />
	</bean>

	<!-- MAIN PANEL -->
	<bean id="mainPanelGetter" class="com.sicpa.standard.sasscl.view.main.MainPanelGetter">
		<property name="systemInfoView" ref="systemInfoView" />
		<property name="selectionDisplayView" ref="selectionDisplayView" />
		<property name="statsView" ref="statisticsView" />
		<property name="viewController" ref="mainFrameController" />
	</bean>

	<!-- SELECT PARAMETER -->

	<bean id="selectProductionParametersHandPickingView" class="com.sicpa.standard.sasscl.view.selection.select.SelectProductionParametersHandPickingView">
		<property name="callback" ref="selectProductionParametersViewController" />
		<property name="selectionModelFactory" ref="selectionModelFactory" />
	</bean>
	<bean id="selectProductionParametersBarcodeView" class="com.sicpa.standard.sasscl.view.selection.select.SelectProductionParametersBarcodeView">
		<property name="callback" ref="selectProductionParametersViewController" />
	</bean>
	<bean id="selectProductionParametersViewController" class="com.sicpa.standard.sasscl.view.selection.select.SelectProductionParametersViewController">
		<property name="handPickingview" ref="selectProductionParametersHandPickingView" />
		<property name="barcodeView" ref="selectProductionParametersBarcodeView" />
		<property name="viewController" ref="mainFrameController" />
		<property name="skuListProvider" ref="skuListProvider" />
		<property name="useBarcodeReader" value="${useBarcodeReader}" />
		<property name="screensFlow" ref="screensFlow" />
		<property name="mainFrameController" ref="mainFrameController" />
	</bean>
	<!-- snapshotView -->

	<bean id="snapshotView" class="com.sicpa.standard.sasscl.view.snapshot.SnapshotView">
		<property name="controller" ref="snapshotViewController" />
		<property name="model" value="#{snapshotViewController.model}" />
	</bean>
	<bean id="snapshotViewController" class="com.sicpa.standard.sasscl.view.snapshot.SnapshotViewController">
		<property name="folder" value="${profile.path}/screenshot" />
	</bean>

	<!-- production sending on exit -->

	<bean id="productionSendingView" class="com.sicpa.standard.sasscl.view.productionSending.ProductionSendingView">
		<property name="controller" ref="productionSendingViewController" />
		<property name="model" value="#{productionSendingViewController.model}" />
	</bean>
	<bean id="productionSendingViewController" class="com.sicpa.standard.sasscl.view.productionSending.ProductionSendingViewController">
		<property name="view" ref="productionSendingView" />
		<property name="production" ref="production" />
		<property name="viewController" ref="mainFrameController" />
	</bean>


	<!--ProductionStatusView -->
	<bean id="productionStatusView" class="com.sicpa.standard.sasscl.view.productionStatus.ProductionStatusView">
		<property name="controller" ref="productionStatusViewController" />
		<property name="model" value="#{productionStatusViewController.model}" />
	</bean>

	<bean id="productionStatusViewController" class="com.sicpa.standard.sasscl.view.productionStatus.ProductionStatusViewController">
		<property name="view" ref="productionStatusView" />
		<property name="enable" value="${displayProductionStatusBar}" />
	</bean>



	<!-- advanced monitoring -->
	<bean id="plcMonitoringRawDisplay" class="com.sicpa.standard.sasscl.view.monitoring.advanced.PlcMonitoringRawDisplay" />

	<bean id="PlcMonitoringController" class="com.sicpa.standard.sasscl.view.monitoring.advanced.PlcMonitoringController">
		<property name="plcVars" ref="allPlcVars" />
		<property name="plcProvider" ref="plcProvider" />
		<property name="lineCount" value="${line.count}" />
	</bean>

	<bean id="plcMonitoringView" class="com.sicpa.standard.sasscl.view.monitoring.advanced.PlcMonitoringView">
		<property name="controller" ref="PlcMonitoringController" />
		<property name="model" value="#{PlcMonitoringController.model}" />
		<property name="views">
			<list>
				<ref bean="plcMonitoringRawDisplay" />
			</list>
		</property>
	</bean>

	<!-- advanced control -->

	<bean id="advancedControlView" class="com.sicpa.standard.sasscl.view.advancedControl.AdvancedControlView">
		<property name="views">
			<list>
				<ref bean="printerControlView" />
			</list>
		</property>
	</bean>

	<bean id="printerControlView" class="com.sicpa.standard.sasscl.view.advancedControl.component.printer.PrinterControlView">
		<property name="controller" ref="printerControlViewController" />
		<property name="model" value="#{printerControlViewController.model}" />
	</bean>
	<bean id="printerControlViewController" class="com.sicpa.standard.sasscl.view.advancedControl.component.printer.PrinterControlViewController">
		<property name="hardwareController" ref="hardwareController" />
	</bean>


</beans>
