<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:aop="http://www.springframework.org/schema/aop" xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">

	<bean id="monitoring" class="com.sicpa.standard.sasscl.monitoring.impl.Monitoring">
		<constructor-arg ref="monitoringModel" />
		<property name="saveIncrPeriod" value="${monitoringSaveIncrementalStatisticsTimer_sec}" />
		<property name="subsystemIdProvider" ref="subsystemIdProvider" />
		<property name="mbeanStatistics" ref="MBeanStatsDelegate" />
		<property name="productionParameters" ref="productionParameters" />
	</bean>

	<bean id="monitoringModel" class="com.sicpa.standard.sasscl.monitoring.impl.DefaultMonitoringSerializerMapping">
		<constructor-arg value="${profile.path}/monitoring/" />
	</bean>

	<bean class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
		<property name="staticMethod" value="com.sicpa.standard.sasscl.monitoring.MonitoringService.set" />
		<property name="arguments">
			<list>
				<ref bean="monitoring" />
			</list>
		</property>
	</bean>

	<bean id="statsMBean" class="com.sicpa.standard.sasscl.monitoring.mbean.scl.SclApp">
		<property name="stats" ref="MBeanStatsDelegate" />
		<property name="errorsRepository" ref="errorsRepository" />
		<property name="plcJmxInfo" ref="plcJmxInfo" />
		<property name="productionConfigProvider" ref="productionConfigProvider" />
		<property name="appVersionProvider" ref="appVersionProvider" />
	</bean>

	<bean id="MBeanStatsDelegate" class="com.sicpa.standard.sasscl.monitoring.mbean.scl.SclAppBeanStatistics">
		<property name="storage" ref="storage" />
		<property name="productionParameters" ref="productionParameters" />
	</bean>

</beans>


