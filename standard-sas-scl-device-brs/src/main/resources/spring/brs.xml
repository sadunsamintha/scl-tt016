<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:aop="http://www.springframework.org/schema/aop" xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">

	<bean id="skuCheckFacadeProvider" class="com.sicpa.standard.sasscl.devices.brs.SkuCheckFacadeProvider" />

	<bean id="injectSkuCheckerIntoProvider" class="com.sicpa.standard.client.common.ioc.InjectByMethodBean">
		<property name="target" ref="skuCheckFacadeProvider" />
		<property name="methodName" value="set" />
		<property name="params" ref="skuCheckFacade" />
	</bean>
	
	<bean id="mapBrsAdaptor" class="com.sicpa.standard.client.common.ioc.GenericMapping" scope="prototype">
		<constructor-arg>
			<map>
				<entry key="standard" value-ref="brsAdaptorStd" />
				<entry key="simulator" value-ref="brsAdaptorSimulator" />
			</map>
		</constructor-arg>
	</bean>

	<bean id="brsAdaptor" factory-bean="mapBrsAdaptor" factory-method="get" scope="prototype">
		<constructor-arg value="${plc.behavior}" />
	</bean>
	
	<bean id="brsAdaptorStd" class="${brsAdaptor}"/>
	
	<bean id="brsAdaptorSimulator" class="${brsAdaptorSimulator}"/>

	<bean id="brs" class="${brs}">
		<constructor-arg ref="brsConfigParametersValues" />
		<constructor-arg ref="skuCheckFacadeProvider" />
		<constructor-arg ref="plcProvider" />
		<constructor-arg ref="brsPlcLineTypeVarDesc" />
		<constructor-arg ref="brsPlcNotificationCntVarDesc" />
		<constructor-arg ref="skuAcquisitionStatistics" />
		<constructor-arg ref="statistics" />
		<constructor-arg ref="plcBrsStateListener" />
		<constructor-arg ref="brsAggregateModel" />
		<constructor-arg ref="tooManyUnreadHandler" />
		<property name="notifications" ref="brsPlcNotifications" />
		<property name="adaptor" ref="brsAdaptor"/>
		<property name="productionConfigProvider" ref="productionConfigProvider" />
	</bean>

	<bean id="tooManyUnreadHandler" class="${tooManyUnreadHandler}">
		<property name="configBean" ref="brsConfigParametersValues" />
	</bean>

	<bean id="brsAggregateModel" class="com.sicpa.standard.sasscl.devices.brs.BrsAggregateModel" />

	<bean id="injectBrsRequestMapToBrsStateListener" class="com.sicpa.standard.client.common.ioc.InjectByMethodBean">
		<property name="target" ref="plcBrsStateListener" />
		<property name="methodName" value="setBrsRequestMap" />
		<property name="params" ref="mapBrsPlcRequestAction" />
	</bean>

	<bean id="skuCheckResultListenerLogger" class="${skuCheckResultListenerLogger}" />

	<bean id="facadeAddResultListenerLogger" class="com.sicpa.standard.client.common.ioc.InjectByMethodBean">
		<property name="target" ref="skuCheckFacade" />
		<property name="methodName" value="addCheckingListener" />
		<property name="params" ref="skuCheckResultListenerLogger" />
	</bean>

</beans>
