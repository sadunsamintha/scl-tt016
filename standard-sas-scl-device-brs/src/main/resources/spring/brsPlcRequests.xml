<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
		http://www.springframework.org/schema/util
		http://www.springframework.org/schema/util/spring-util-3.0.xsd">

	<util:list id="brsPlcRequests">
		<ref bean="brsPlcSelectedSkuVar" />
		<ref bean="brsPlcSetSkuCheckModeVar" />
		<ref bean="brsPlcResetSkuCheckModeVar" />
		<ref bean="brsPlcLineEnableVar" />
		<ref bean="brsPlcLineDisableVar" />
		<ref bean="brsPlcReloadParamVar" />
	</util:list>

	<bean id="brsPlcSelectedSkuVar" class="com.sicpa.standard.sasscl.devices.brs.SkuPlcVariable">
		<constructor-arg ref="productionParameters" />
		<constructor-arg value="#{plcVarMap['BRS_SELECTED_SKU']}" />
	</bean>

	<bean id="brsPlcSetSkuCheckModeVar" class="com.sicpa.standard.plc.value.PlcVariable" factory-method="createBooleanVar">
		<constructor-arg value="#{plcVarMap['BRS_SET_SKU_CHECK_MODE']}" />
		<constructor-arg value="true" />
	</bean>

	<bean id="brsPlcResetSkuCheckModeVar" class="com.sicpa.standard.plc.value.PlcVariable" factory-method="createBooleanVar">
		<constructor-arg value="#{plcVarMap['BRS_SET_SKU_CHECK_MODE']}" />
		<constructor-arg value="false" />
	</bean>

	<bean id="brsPlcLineEnableVar" class="com.sicpa.standard.plc.value.PlcVariable" factory-method="createBooleanVar">
		<constructor-arg value="#{plcVarMap['BRS_LINE_ENABLE']}" />
		<constructor-arg value="true" />
	</bean>

	<bean id="brsPlcLineDisableVar" class="com.sicpa.standard.plc.value.PlcVariable" factory-method="createBooleanVar">
		<constructor-arg value="#{plcVarMap['BRS_LINE_ENABLE']}" />
		<constructor-arg value="false" />
	</bean>

	<bean id="brsPlcReloadParamVar" class="com.sicpa.standard.plc.value.PlcVariable" factory-method="createBooleanVar">
		<constructor-arg value="#{plcVarMap['REQUEST_RELOAD_BRS_CONFIG']}" />
		<constructor-arg value="true" />
	</bean>

	<bean id="brsPlcReloadParamAction" class="com.sicpa.standard.plc.controller.actions.PlcAction" factory-method="request">
		<constructor-arg value="#{brsPlcReloadParamVar.getVariableName()}" />
		<constructor-arg value="true" />
	</bean>

	<!-- inject BRS PLC reload in standard map so that this action is included whenever the reload takes place -->
	<bean id="addBrsPlcReloadParamVarIntoReloadPlcParamRequest" class="com.sicpa.standard.client.common.ioc.InjectByMethodBean">
		<property name="target" ref="reloadPlcParamRequest" />
		<property name="methodName" value="addPlcAction" />
		<property name="params" ref="brsPlcReloadParamAction" />
	</bean>

	<util:map id="mapBrsPlcRequestAction">
		<entry>
			<key>
				<util:constant static-field="com.sicpa.standard.sasscl.devices.brs.BrsPlcRequest.LINE_ENABLE" />
			</key>
			<ref bean="brsPlcLineEnableVar" />
		</entry>
		<entry>
			<key>
				<util:constant static-field="com.sicpa.standard.sasscl.devices.brs.BrsPlcRequest.LINE_DISABLE" />
			</key>
			<ref bean="brsPlcLineDisableVar" />
		</entry>
		<entry>
			<key>
				<util:constant static-field="com.sicpa.standard.sasscl.devices.brs.BrsPlcRequest.SET_EXPECTED_SKU" />
			</key>
			<ref bean="brsPlcSelectedSkuVar" />
		</entry>
		<entry>
			<key>
				<util:constant static-field="com.sicpa.standard.sasscl.devices.brs.BrsPlcRequest.RESET_EXPECTED_SKU" />
			</key>
			<ref bean="brsPlcSelectedSkuVar" />
		</entry>
		<entry>
			<key>
				<util:constant static-field="com.sicpa.standard.sasscl.devices.brs.BrsPlcRequest.SET_SKU_CHECK_MODE" />
			</key>
			<ref bean="brsPlcSetSkuCheckModeVar" />
		</entry>
		<entry>
			<key>
				<util:constant static-field="com.sicpa.standard.sasscl.devices.brs.BrsPlcRequest.RESET_SKU_CHECK_MODE" />
			</key>
			<ref bean="brsPlcResetSkuCheckModeVar" />
		</entry>
	</util:map>

</beans>