<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:aop="http://www.springframework.org/schema/aop" xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">


	<bean id="skuCheckConfig" class="com.sicpa.standard.client.common.utils.ConfigUtils" factory-method="load">
		<constructor-arg value="config/skuCheck/skuCheckConfig.xml" />
	</bean>

	<bean id="skuChecker" class="${skuChecker}">
		<property name="productionParameters" ref="productionParameters" />
		<property name="skuListProvider" ref="skuListProvider" />
		<property name="confidenceLevelOk" value="#{skuCheckConfig.confidenceLevelOk}" />
		<property name="confidenceLevelCritical" value="#{skuCheckConfig.confidenceLevelCritical}" />
	</bean>

	<bean id="skuCheckResultListener" class="${skuCheckResultListener}" />

	<bean id="skuCheckTrigger" class="${skuCheckTrigger}" init-method="start" destroy-method="stop">
		<property name="trigValue" value="#{skuCheckConfig.trigValue}" />
	</bean>

	<bean id="skuAcquisitionStatistics" class="${skuAcquisitionStatistics}" />

	<bean id="skuBuffer" class="${skuBuffer}" />

	<bean id="skuFilter" class="${skuFilter}" />

	<bean id="skuNotifier" class="${skuNotifier}" />

	<bean id="skuCheckFacade" class="${skuCheckFacade}">
		<constructor-arg value="#{skuCheckConfig.devicesCount}" />
		<constructor-arg ref="skuChecker" />
		<constructor-arg ref="skuCheckTrigger" />
		<constructor-arg ref="skuAcquisitionStatistics" />
		<constructor-arg ref="skuBuffer" />
		<constructor-arg ref="skuFilter" />
		<constructor-arg ref="skuNotifier" />
	</bean>

	<bean id="facadeAddResultListener" class="com.sicpa.standard.client.common.ioc.InjectByMethodBean">
		<property name="target" ref="skuCheckFacade" />
		<property name="methodName" value="addCheckingListener" />
		<property name="params" ref="skuCheckResultListener" />
	</bean>

</beans>
